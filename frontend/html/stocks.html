<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>è‚¡ç¥¨è¿½è¹¤ç³»çµ±</title>
    <link rel="stylesheet" href="/assets/styles.css">
    <link rel="stylesheet" href="/assets/stock.css">
    <script src="/assets/auth.js" defer></script>
    <script src="/assets/stocks.js" defer></script>
    <script>
        function updateStockRow(data) {
            const rowId = `stock-row-${data.symbol}`;
            let row = document.getElementById(rowId);

            const profitClass = data.profit >= 0 ? "profit-positive" : "profit-negative";
            const avgPriceDisplay = data.avg_price !== undefined ? parseFloat(data.avg_price).toFixed(2) : '-';

            if (!row) {
                row = document.createElement("tr");
                row.id = rowId;
                row.innerHTML = `
                    <td>${data.symbol}</td>
                    <td>${data.shares}</td>
                    <td id="avg-${data.symbol}">${avgPriceDisplay}</td>
                    <td id="price-${data.symbol}">${data.price.toFixed(2)}</td>
                    <td id="profit-${data.symbol}" class="${profitClass}">${data.profit.toFixed(2)}</td>
                `;
                document.getElementById("stock-table-body").appendChild(row);
            } else {
                document.getElementById(`price-${data.symbol}`).textContent = data.price.toFixed(2);
                document.getElementById(`avg-${data.symbol}`).textContent = avgPriceDisplay;
                const profitCell = document.getElementById(`profit-${data.symbol}`);
                profitCell.textContent = data.profit.toFixed(2);
                profitCell.className = profitClass;
            }
        }
    </script>
</head>
<body>
    <header>
        <h1>ğŸ“ˆ è‚¡ç¥¨è¿½è¹¤ç³»çµ±</h1>
        <nav>
            <ul>
                <li><a href="/index.html">é¦–é </a></li>
                <li><a href="/projects.html">åŠŸèƒ½å±•ç¤º</a></li>
            </ul>
        </nav>
    </header>

    <section class="content">
        <h2>è¼¸å…¥è‚¡ç¥¨</h2>
        <form id="stock-form">
            <input type="text" id="symbol" placeholder="è‚¡ç¥¨ä»£ç¢¼ (e.g., 2330)" required>
            <input type="number" id="shares" placeholder="æŒè‚¡æ•¸é‡" required>
            <input type="number" id="avgPrice" step="0.01" placeholder="è³¼å…¥å‡åƒ¹" required>
            <button type="submit">æ–°å¢/æ›´æ–°</button>
        </form>

        <h2>æˆ‘çš„æŒè‚¡</h2>
        <table border="1" width="100%">
            <thead>
                <tr>
                    <th>è‚¡ç¥¨ä»£ç¢¼</th>
                    <th>æŒè‚¡æ•¸</th>
                    <th>è³¼å…¥å‡åƒ¹</th>
                    <th>å³æ™‚åƒ¹æ ¼</th>
                    <th>æç›Š</th>
                </tr>
            </thead>
            <tbody id="stock-table-body">
                <!-- è‚¡ç¥¨åˆ—è¡¨æœƒåœ¨é€™é‚Šæ’å…¥ -->
            </tbody>
        </table>
    </section>
</body>
</html>